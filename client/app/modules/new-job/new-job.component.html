<a class="ui button" routerLink="/home">
    <i class="cancel icon"></i>Cancel
</a>

<h1>
    Create New Job
</h1>

<form #form="ngForm" class="ui form" id="new-job-form"
      (ngSubmit)="onSubmit(form)"
      novalidate>
    {{finalName.result}}
    <!--Job Name-->
    <div class="required field" [class.error]="submitted && !name.valid">
        <!--TODO: toggle on whether user would let system auto generate name-->
        <label>Job Name</label>
        <input type="text"
               required
               [(ngModel)]="job.name"
               (ngModelChange)="this.submitted = false; onJobNameChange();"
               name="name"
               #name="ngModel">
    </div>
    <!--Client & Brand-->
    <div class="two fields">
        <div class="field">
            <!--TODO-->
            <label>Client</label>
            <select class="ui search dropdown selection"
                    [(ngModel)]="job.client"
                    (ngModelChange)="onClientChange()"
                    name="client">
                <option value=" ">(no client)</option>
                <option *ngFor="let cli of clients; let i = index"
                        [ngValue]="cli">{{cli.name}}
                </option>
            </select>
        </div>
        <div class="field">
            <label>Brand (optional)</label>
            <select class="ui search dropdown selection" name="brand"
                    [disabled]="!job.client.brands || job.client.brands.length == 0"
                    [(ngModel)]="job.brand"
                    (ngModelChange)="onBrandChange()">
                <option value=" ">(no brand)</option>
                <option *ngFor="let b of job.client.brands; let i = index"
                        [value]="b">{{b}}
                </option>
            </select>
        </div>
    </div>
    <!--Start and End Dates-->
    <div class="two fields">
        <div class="required field" [class.error]="!startDate.valid">
            <label>Start Date (Month/Day/Year)</label>
            <input type="date"
                   required
                   [(ngModel)]="job.startDate"
                   (ngModelChange)="onDateChange('start', $event)"
                   name="startDate"
                   #startDate="ngModel">
        </div>
        <div class="required field" [class.error]="!endDate.valid">
            <label>End Date (Month/Day/Year)</label>
            <input type="date"
                   required
                   [(ngModel)]="job.endDate"
                   (ngModelChange)="onDateChange('end', $event)"
                   name="endDate"
                   #endDate="ngModel">
        </div>
    </div>
    <!--TODO
        client select
        brand select after client
        projectStatus select
        rateCard select
        serviceType (toggle or select or radial)
        description text area
        tags (form/list display like cakebook's ingredients; be careful of enter button)
        phases (not MVP(?))
    -->
    <div class="ui divider"></div>
    <button type="submit" class="ui right floated positive button"
            [disabled]="!form.form.valid || submitted">Submit
    </button>

</form>